'use strict';

var main = angular.module('mainApp', [
    'service.index',

    'theme.home',
    'theme.Navigation',
    'theme.production',
    'them.machining',
    'them.sale',
    'theme.analysis',

    'theme.homeShareData',
    'theme.directives',

    'ngRoute'
]);

main.controller('mainCtr', ['$rootScope', '$scope', 'localStorage', 'plantTask',
    function ($rootScope, $scope, localStorage, plantTask) {

    localStorage.login_check();//login watch
     $scope.plantTaskData = plantTask.plantTaskData;//首页种植任务数据

}]);


main.config(['$provide', '$routeProvider', '$locationProvider', function ($provide, $routeProvider, $locationProvider) {
    $routeProvider.when('/', {
        templateUrl: 'views/home/index.html'
    })
    .when('/:id', {
        templateUrl: function (param) {
            return './views/home/' + param.id + '.html';
        }
    })
        .when('/analysis/:id', {
            templateUrl: function (param) {
                return './views/analysis/' + param.id + '.html';
            }
        })
        .when('/machining/:id', {
            templateUrl: function (param) {
                return './views/machining/' + param.id + '.html';
            }
        })
        .when('/plan/:id', {
            templateUrl: function (param) {
                return './views/plan/' + param.id + '.html';
            }
        })
        .when('/production/:id', {
            templateUrl: function (param) {
                return './views/production/' + param.id + '.html';
            }
        })

        .when('/resource/:id', {
            templateUrl: function (param) {
                return './views/resource/' + param.id + '.html';
            }
        })
        .when('/resume/:id', {
            templateUrl: function (param) {
                return './views/resume/' + param.id + '.html';
            }
        })
        .when('/sale/:id', {
            templateUrl: function (param) {
                return './views/sale/' + param.id + '.html';
            }
        })
        .when('/serviceCentre/:id', {
            templateUrl: function (param) {
                return './views/serviceCentre/' + param.id + '.html';
            }
        })
    .otherwise({
        redirectTo: '/'
    });

    //$locationProvider.html5Mode(true);
}]);

/**
 * Created by hy on 16-6-22.
 */
(function(){
    'use strict';

    angular.module('theme.Navigation', [])
        .controller('NavigationCtr', ['$scope', 'NavigationData', function($scope, NavigationData){

            var self = $scope;
            self.menu = NavigationData.MainMenu;

            self.clickBgimg1 = [];
            self.clickNav = function(item){

                if(item.child == undefined){
                    self.currentLabel = item.label;
                    self.clickBgimg1["label"] = item.label;
                }
            }

            self.clickSecondNav = function(item){

                if(item.child != undefined){
                    self.currentLabel = item.label;
                    self.clickBgimg1["label"] = item.label;
                }
            }

        }])

})();
/**
 * Created by hy on 16-7-5.
 */

(function(){
    'use strict'

    angular.module('theme.home', [])
        .controller('integralMall', ['$scope', 'integralData', function($scope, integralData){
            var self = $scope;

            self.integralData = integralData.integralData;

            self.secondSwitch = false;
            self.integralContent = 'contentUl';
            self.getContentLi = function(data){
                self.secondSwitch = true;
                self.integralContent = 'contentLi';
                self.contentLi = data;
                console.log("contentLi", self.contentLi);
            }

            self.closeSecond = function(){
                self.secondSwitch = false;
                self.integralContent = 'contentUl';
            }

            self.number = 1;
            self.nuberPlus = function(data){
                self.number += 1;
            }

            self.numberReduce = function(data){
                self.number -= 1;
            }
        }])
        .controller('integralRule', ['$scope', 'integralRuleData', function($scope, integralRuleData){

            var self = $scope;
            self.ruleData = integralRuleData.ruleData;
            self.currentData = self.ruleData[0];
            self.switshNav = function(data){
                self.currentData = data;
            }
        }])
})();
/**
 * Created by hy on 16-7-21.
 */
(function () {
    'use strict'

    angular.module('theme.production', [])
        .controller('farmCtr', ['$scope', 'farmSelect', function ($scope, farmSelect) {

            var self = $scope;

            self.labelNav = '农事管理';
            self.manage = function () {
                self.labelNav = '农事管理';
            }

            self.disease = function () {
                self.labelNav = '病害防治';
            }

            self.varietiesPart = {
                varieties: '',
                Part: ''
            };

            self.varietiesPartData = farmSelect.varietiesPartData;

        }])

        .controller('plantCtr', ['$scope', function ($scope) {
            var self = $scope;
            self.labelNav = '种植管理';
            self.plantation = function () {
                self.labelNav = '种植管理';
            }

            self.modelBase = function () {
                self.labelNav = '模型库';
            }
        }])

        .controller('weatherCtr', ['$scope', 'HighchartService', function ($scope, HighchartService) {
            var self = $scope;

            //温度日期切换
            self.day_temperature = true;
            self.month_temperature = false;

            self.dayTemperature = function () {
                self.month_temperature = false;
                self.day_temperature = true;
            }
            self.monthTemperature = function () {
                self.month_temperature = true;
                self.day_temperature = false;
            }

            //降水量日期切换
            self.day_precipitation = true;
            self.month_precipitation = false;
            self.dayPrecipitation = function () {
                self.day_precipitation = true;
                self.month_precipitation = false;
            }
            self.monthPrecipitation = function () {
                self.day_precipitation = false;
                self.month_precipitation = true;
            }


            self.getTemperatureChart = HighchartService.getChartOption("temperature");
            self.getwindColumnChart = HighchartService.getChartOption("windColumnChart");
            self.getprecipitationChart = HighchartService.getChartOption("precipitationChart");

            $('#container').highcharts({
                colors: ["#88F179", "#FCB472", "#8085E9"],
                data: {
                    table: 'freq',
                    startRow: 1,
                    endRow: 17,
                    endColumn: 7
                },
                chart: {
                    polar: true,
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },
                title: {
                    text: ''
                },
                pane: {
                    size: '85%'
                },
                legend: {
                    enabled:false
                },
                credits: {
                    enabled:false//去掉hightcharts.com
                },

                exporting: {
                    enabled:false//去掉菜单
                },
                xAxis: {
                    labels: {
                        style: {
                            color: '#fff'
                        }
                    },
                    tickmarkPlacement: 'on'
                },

                yAxis: {
                    min: 0,
                    endOnTick: false,
                    showLastLabel: true,
                    title: {
                        text: ''
                    },
                    labels: {
                        style: {
                            color: '#fff'
                        },
                        formatter: function () {
                            return this.value + '%';
                        }
                    }
                },

                tooltip: {
                    valueSuffix: '%',
                    followPointer: true
                },

                plotOptions: {
                    series: {
                        stacking: 'normal',
                        shadow: false,
                        groupPadding: 0,
                        pointPlacement: 'on'
                    }
                }
            });


        }])

        .controller('monitorCtr', ['$scope', 'HighchartService', function($scope, HighchartService){
            var self = $scope;

            self.timeObj = {
                day: true,
                week: false,
                month: false,
                year: false

            }
            self.switchTime = function(time){
                self.timeObj[time] = true;
                angular.forEach(self.timeObj, function(value, key){
                    if(key != time){
                        self.timeObj[key] = false;
                    }
                })

            }

            self.monitorChart = HighchartService.getChartOption("monitorChart");
            self.getwindColumnChart = HighchartService.getChartOption("windColumnChart");
            self.getprecipitationChart = HighchartService.getChartOption("precipitationChart");

            //降水量日期切换
            self.day_precipitation = true;
            self.month_precipitation = false;
            self.dayPrecipitation = function () {
                self.day_precipitation = true;
                self.month_precipitation = false;
            }

            self.monthPrecipitation = function () {
                self.day_precipitation = false;
                self.month_precipitation = true;
            }


            $('#container').highcharts({
                colors: ["#88F179", "#FCB472", "#8085E9"],
                data: {
                    table: 'freq',
                    startRow: 1,
                    endRow: 17,
                    endColumn: 7
                },
                chart: {
                    polar: true,
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },
                title: {
                    text: ''
                },
                pane: {
                    size: '85%'
                },
                legend: {
                    enabled:false
                },
                credits: {
                    enabled:false//去掉hightcharts.com
                },

                exporting: {
                    enabled:false//去掉菜单
                },
                xAxis: {
                    labels: {
                        style: {
                            color: '#fff'
                        }
                    },
                    tickmarkPlacement: 'on'
                },

                yAxis: {
                    min: 0,
                    endOnTick: false,
                    showLastLabel: true,
                    title: {
                        text: ''
                    },
                    labels: {
                        style: {
                            color: '#fff'
                        },
                        formatter: function () {
                            return this.value + '%';
                        }
                    }
                },

                tooltip: {
                    valueSuffix: '%',
                    followPointer: true
                },

                plotOptions: {
                    series: {
                        stacking: 'normal',
                        shadow: false,
                        groupPadding: 0,
                        pointPlacement: 'on'
                    }
                }
            });

        }])
})();
/**
 * Created by hy on 16-7-27.
 */

(function(){
    'use strict'

    angular.module('them.machining', [])
        .controller('csCtr', ['$scope', function($scope){

            var self = $scope;

            self.labelNav = '采收记录';
            self.record = function(){
                self.labelNav = '采收记录';
            }

            self.probable = function(){
                self.labelNav = '预采管理';
            }

            self.presell = function(){
                self.labelNav = '预售管理';
            }

            //date Conversion
            self.dateConversion = '今日';
            self.today = function(){
                self.dateConversion = '今日';
            }

            self.tomorrow = function(){
                self.dateConversion = '明日';
            }

            self.history = function(){
                self.dateConversion = '历史';
            }
        }])

        .controller('stockCtr', ['$scope', function($scope){
            var self = $scope;

            self.stockTopNav = '库存管理';
            self.inventory = function(){
                self.stockTopNav = '库存管理';
            }

            self.stale = function(){
                self.stockTopNav = '过期物料';
            }

            self.spring = function(){
                self.stockTopNav = '流水记录';
            }

            self.check = function(){
                self.stockTopNav = '盘点记录';
            }
        }])

})();

/**
 * Created by hy on 16-8-2.
 */

(function () {
    'use strict'

    angular.module('them.sale', [])
        .controller('orderCtr', ['$rootScope', '$scope', function ($rootScope, $scope) {
            var self = $scope;

            self.orderTopNav = '订单管理';
            self.orderLeftNav = '全部订单';

            self.orderform = function () {
                self.orderTopNav = '订单管理';
            }

            self.clientele = function () {
                self.orderTopNav = '客户管理';
            }

            self.member = function () {
                self.orderTopNav = '会员卡管理';
            }

            self.packet = function () {
                self.orderTopNav = '红包管理';
            }

            self.$on('orderLeftNavText', function (evet, data) {
                self.orderLeftNav = data;
                self.$apply();
            })

        }])

        .controller('supplyCtr', ['$scope', function($scope){
            var self = $scope;

            self.labelNav = '求购信息';

            self.askMessage = function () {
                self.labelNav = '求购信息';
            }

            self.myDemand = function () {
                self.labelNav = '我的供求';
            }
        }])

})();
/**
 * Created by hy on 16-9-27.
 */


(function () {

    'use strict'

    angular.module('theme.analysis', [])
        .controller('analysisCtr', ['$scope', 'HighchartService', 'timeData', function ($scope, HighchartService, timeData) {

            var self = $scope;

            self.switchLeftNav = "农场土地资源统计";

            self.$on("switchNav", function (e, v) {

                self.switchLeftNav = v;
                self.$apply();
            })

            self.allcheck = true;

            self.getNCTDZYanalysisChart = HighchartService.getChartOption("getNCTDZYanalysisChart");
            self.getNZTRPanalysisChart = HighchartService.getChartOption("getNZTRPanalysisChart");
            self.getXQCLanalysisChart = HighchartService.getChartOption("getXQCLanalysisChart");


            //

            /*-----------------采购合同-------------------*/

            //selsect 共用时间
            self.monthData = timeData.month;
            self.yearData = timeData.year;
            var year_month = timeData.year_month;

            //监测选择时间
            self.selectTime = {
                startYear: "2016",
                startMonth: "1月",
                endYear: "2016",
                endMonth: "12月",

            }


            function getTimeRange() {
                self.timeRange = [];
                var staYear = parseInt(self.selectTime.startYear);
                var staMon = parseInt(self.selectTime.startMonth);
                var endYear = parseInt(self.selectTime.endYear);
                var endMon = parseInt(self.selectTime.endMonth);

                while (staYear <= endYear) {
                    if (staYear === endYear) {
                        while (staMon <= endMon) {
                            self.timeRange.push(staYear + "-" + staMon);
                            staMon++;
                        }
                        staYear++;
                    } else {
                        self.timeRange.push(staYear + "-" + staMon);
                        staMon++;
                        if (staMon > 12) {
                            staMon = 1;
                            staYear++;
                        }
                    }
                }
            }

            getTimeRange();

            // 搜索事件
            self.cghtSearch = function () {
                getTimeRange();
                console.log(self.timeRange);
            }

        }])
})()
/**
 * Created by hy on 16-6-14.
 */
angular.module('service.index',[
    'service.localStorage',
    'service.highcharts',
])
/**
 * Created by hy on 16-6-14.
 */
angular.module('service.localStorage', ['LocalStorageModule'])

   /* .config(function(localStorageServiceProvider){
        localStorageServiceProvider
            .setStorageType('localStorage');
    })*/

    .config(['localStorageServiceProvider', function(localStorageServiceProvider){
        localStorageServiceProvider.setPrefix('yy');
        localStorageServiceProvider.setStorageType('localStorage');
    }])

.service('localStorage', ['$rootScope', 'localStorageService', function ($rootScope, localStorageService) {

       var self = this;
        var _username = "";
        var _token = "";

        self.login_check = function () {
            console.log("-----loginCheck");
            var token = localStorageService.get("token");
            var username = localStorageService.get("username");
            if(null !== username && null !== token){
                 _token = token;
                _username = username;
            }else{
                window.location = "./login.html"
            }
        }

        self.setStorage = function(key, value){
            key && value ? localStorageService.set(key,value):false;
        }

        self.getToken = function(){
            return _token;
        }

        self.getUsername = function(){
            return _username;
        }

    }])
/**
 * Created by hy on 16-8-25.
 */

angular.module("service.highcharts", ["highcharts-ng"])
    .service("HighchartService", [function () {

        var self = this;

        Highcharts.setOptions({
            lang: {
                shortMonths: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
                weekdays: ["周日", "星期一", "星期二", "星期三", "星期四", "星期五", "周六"]
            }
        })

        self.temperatureChart = {
            options: {
                chart: {
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: false
                },
                tooltip: {
                    crosshairs: true,
                    shared: true,
                    valueSuffix: '°C',
                    dateTimeLabelFormats: {
                        day: '%m-%d日'
                    }
                }
            },

            series: [{
                name: '平均温度',
                data: [[Date.UTC(2016, 8, 26), 25], [Date.UTC(2016, 8, 27), 30], [Date.UTC(2016, 8, 28), 32],
                    [Date.UTC(2016, 8, 29), 28], [Date.UTC(2016, 8, 30), 26], [Date.UTC(2016, 9, 1), 30],
                    [Date.UTC(2016, 9, 2), 26], [Date.UTC(2016, 9, 3), 27], [Date.UTC(2016, 9, 4), 30]],
                zIndex: 1,
                color: "#30e8f9",
                marker: {
                    fillColor: '#e0deed',
                    lineWidth: 2,
                    lineColor: '#30e8f9'
                }
            }, {
                name: '范围',
                data: [[Date.UTC(2016, 8, 26), 21, 31], [Date.UTC(2016, 8, 27), 26, 32], [Date.UTC(2016, 8, 28), 23, 33],
                    [Date.UTC(2016, 8, 29), 25, 30], [Date.UTC(2016, 8, 30), 24, 30], [Date.UTC(2016, 9, 1), 26, 31],
                    [Date.UTC(2016, 9, 2), 26, 30], [Date.UTC(2016, 9, 3), 26, 30], [Date.UTC(2016, 9, 4), 26, 32]],
                type: 'arearange',
                lineWidth: 0,
                linkedTo: ':previous',
                color: '#e0deed',
                fillOpacity: 0.3,
                zIndex: 0
            }],

            title: {
                text: ''
            },

            xAxis: {
                type: 'datetime',
                step: 1,
                labels: {
                    style: {
                        color: '#fff'
                    },
                    formatter: function () {
                        return Highcharts.dateFormat('%d日', this.value);
                    }
                }
            },

            yAxis: {
                title: {text: ""},

                labels: {
                    style: {
                        color: '#fff'
                    },
                    format: '{value} ℃'
                }
            }
        }

        self.windColumnChart = {
            options: {
                chart: {
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: true,
                    itemStyle: {
                        'color': '#fff'
                    }
                },
                tooltip: {
                    crosshairs: true,
                    shared: true,
                    valueSuffix: '次',
                    dateTimeLabelFormats: {
                        month: '%m月'
                    }
                }
            },

            series: [{
                name: '一级风',
                data: [[Date.UTC(2016, 3), 22], [Date.UTC(2016, 4), 32],
                    [Date.UTC(2016, 5), 32], [Date.UTC(2016, 6), 25], [Date.UTC(2016, 7), 21]],
                color: "#88F179",
                pointWidth: 20
            },
                {
                    name: '二级风',
                    data: [[Date.UTC(2016, 3), 21], [Date.UTC(2016, 4), 26], [Date.UTC(2016, 5), 26],
                        [Date.UTC(2016, 6), 25], [Date.UTC(2016, 7), 26]],
                    color: "#FCB472",
                    pointWidth: 20
                },
                {
                    name: '三级风',
                    data: [[Date.UTC(2016, 3), 21], [Date.UTC(2016, 4), 28], [Date.UTC(2016, 5), 23],
                        [Date.UTC(2016, 6), 22], [Date.UTC(2016, 7), 26]],
                    color: "#8085E9",
                    pointWidth: 20
                }],

            title: {
                text: ''
            },

            xAxis: {
                type: 'datetime',
                step: 1,
                labels: {
                    style: {
                        color: '#fff'
                    },
                    formatter: function () {
                        return Highcharts.dateFormat('%m月', this.value);
                    }
                }
            },

            yAxis: {
                title: {text: ""},

                labels: {
                    style: {
                        color: '#fff'
                    },
                    format: '{value} 次'
                }
            }
        }

        self.precipitationChart = {
            options: {
                chart: {
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: false
                },
                tooltip: {
                    crosshairs: true,
                    shared: true,
                    valueSuffix: 'mm',
                    dateTimeLabelFormats: {
                        day: '%m-%d日'
                    }
                }
            },

            series: [{
                name: '降水量',
                type: 'line',
                color: "#dddaeb",
                data: [[Date.UTC(2016, 8, 26), 25], [Date.UTC(2016, 8, 27), 30], [Date.UTC(2016, 8, 28), 32],
                    [Date.UTC(2016, 8, 29), 28], [Date.UTC(2016, 8, 30), 26], [Date.UTC(2016, 9, 1), 30],
                    [Date.UTC(2016, 9, 2), 26], [Date.UTC(2016, 9, 3), 27], [Date.UTC(2016, 9, 4), 30]],
            },
                {
                    name: '累积降水量',
                    yAxis: 1,
                    data: [[Date.UTC(2016, 8, 26), 25], [Date.UTC(2016, 8, 27), 30], [Date.UTC(2016, 8, 28), 32],
                        [Date.UTC(2016, 8, 29), 28], [Date.UTC(2016, 8, 30), 26]],
                    color: "#30e8f9",
                    pointWidth: 30
                }],

            title: {
                text: ''
            },

            xAxis: {
                type: 'datetime',
                step: 1,
                labels: {
                    style: {
                        color: '#fff'
                    },
                    formatter: function () {
                        return Highcharts.dateFormat('%d日', this.value);
                    }
                }
            },

            yAxis: [{
                title: {
                    text: "降水量(mm)",
                    style: {
                        color: '#fff'
                    },
                },
                labels: {
                    style: {
                        color: '#fff'
                    }
                }
            },
                {
                    title: {
                        text: "累积降水量(mm)",
                        style: {
                            color: '#fff'
                        },
                    },

                    labels: {
                        style: {
                            color: '#fff'
                        }
                    },
                    opposite: true
                },
            ],
        }

        self.monitorChart = {
            options: {
                chart: {
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: true,
                    itemStyle: {
                        'color': '#fff'
                    }
                },
                tooltip: {
                    crosshairs: true,
                    shared: true,
                    valueSuffix: 'mm',
                    dateTimeLabelFormats: {
                        day: '%m-%d日'
                    }
                }
            },

            series: [{
                name: '温度',
                color: "#32c3fd",
                data: [[Date.UTC(2016, 8, 26), 25], [Date.UTC(2016, 8, 27), 30], [Date.UTC(2016, 8, 28), 32],
                    [Date.UTC(2016, 8, 29), 28], [Date.UTC(2016, 8, 30), 26], [Date.UTC(2016, 9, 1), 30],
                    [Date.UTC(2016, 9, 2), 26], [Date.UTC(2016, 9, 3), 27], [Date.UTC(2016, 9, 4), 30]],
            },
                {
                    name: '湿度',
                    yAxis: 1,
                    data: [[Date.UTC(2016, 8, 26), 20], [Date.UTC(2016, 8, 27), 26], [Date.UTC(2016, 8, 28), 24],
                        [Date.UTC(2016, 8, 29), 26], [Date.UTC(2016, 8, 30), 28], [Date.UTC(2016, 9, 1), 26],
                        [Date.UTC(2016, 9, 2), 30], [Date.UTC(2016, 9, 3), 28], [Date.UTC(2016, 9, 4), 29]],
                    color: "#90ed7d",
                    pointWidth: 30
                }],

            title: {
                text: ''
            },

            xAxis: {
                type: 'datetime',
                step: 1,
                labels: {
                    style: {
                        color: '#fff'
                    },
                    formatter: function () {
                        return Highcharts.dateFormat('%d日', this.value);
                    }
                }
            },

            yAxis: [{
                title: {
                    text: "温度(℃)",
                    style: {
                        color: '#fff'
                    },
                },
                labels: {
                    style: {
                        color: '#fff'
                    },

                    format: '{value} ℃'
                },
            },
                {
                    title: {
                        text: "湿度(%)",
                        style: {
                            color: '#fff'
                        },
                    },

                    labels: {
                        style: {
                            color: '#fff'
                        },

                        format: '{value} %RH',
                    },

                    opposite: true
                },
            ],
        }

        self.getNCTDZYanalysisChart = {
            options: {
                chart: {
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: true,
                },
                tooltip: {
                   /* shadow: true,
                    valueSuffix: '亩',*/
                    headerFormat: '',
                    pointFormat: '{series.name} : {point.y}亩'
                },
                plotOptions: {
                    column: {
                        dataLabels: {
                            enabled: true,
                            //color: '#7cb5ec',
                            formatter: function () {
                                return this.y + '亩'
                            },
                        }
                    }
                },
            },

            series: [{
                name: '云洋',
                data: [68],
                color: "#3FB4C1",
                pointWidth: 660
            }],

            title: {
                text: ''
            },

            xAxis: {
                title: {text: null},
                labels: {
                    enabled: false
                },
            },

            yAxis: {
                title: {text: "统计数量"},
            }

        }

        self.getNZTRPanalysisChart = {
            options: {
                chart: {
                    type: 'column',
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: true,
                },
                tooltip: {
                    /* shadow: true,
                     valueSuffix: '亩',*/
                    headerFormat: '',
                    pointFormat: '{series.name} : {point.y}亩'
                },
                plotOptions: {
                    column: {
                        dataLabels: {
                            enabled: true,
                            //color: '#7cb5ec',
                           /* formatter: function () {
                                return this.y + '亩'
                            },*/
                        }
                    }
                },
            },

            series: [{
                name: '农资投入',
                data: []
            }],

            title: {
                text: ''
            },

            xAxis: {
                title: {text: null},
                labels: {
                    enabled: false
                },
            },

            yAxis: {
                title: {text: "使用量"},
            }

        }

        self.getXQCLanalysisChart = {
            options: {
                chart: {
                    backgroundColor: 'rgba(0,0,0,0)'
                },

                legend: {
                    enabled: true,
                },
                tooltip: {
                    shadow: true,
                    valueSuffix: 'kg',
                },
                plotOptions: {
                    column: {
                        dataLabels: {
                            enabled: true,
                        }
                    }
                },
            },

            series: [{
                name: '圆黄梨',
                data: [[Date.UTC(2016, 8, 26), 25], [Date.UTC(2016, 8, 27), 30], [Date.UTC(2016, 8, 28), 32],
                    [Date.UTC(2016, 8, 29), 28], [Date.UTC(2016, 8, 30), 26], [Date.UTC(2016, 9, 1), 30],
                    [Date.UTC(2016, 9, 2), 26], [Date.UTC(2016, 9, 3), 27], [Date.UTC(2016, 9, 4), 30]],
                color: "#0A8FC8",
            }, {
                name: '大黄瓜',
                data: [[Date.UTC(2016, 8, 26), 21], [Date.UTC(2016, 8, 27), 26], [Date.UTC(2016, 8, 28), 23],
                    [Date.UTC(2016, 8, 29), 25], [Date.UTC(2016, 8, 30), 24], [Date.UTC(2016, 9, 1), 26],
                    [Date.UTC(2016, 9, 2), 26], [Date.UTC(2016, 9, 3), 26], [Date.UTC(2016, 9, 4), 26]],
                color: '#50B432',
            }],

            title: {
                text: ''
            },

            xAxis: {
                type: 'datetime',
                step: 1,
                labels: {
                    style: {
                        color: '#fff'
                    },
                    formatter: function () {
                        return Highcharts.dateFormat('%d日', this.value);
                    }
                }
            },

            yAxis: {
                title: {text: "需求产量(kg)"},
            }

        }

        self.getChartOption = function (stype) {
            if ("temperature" == stype) {
                return self.temperatureChart
            }
            if ("windColumnChart" == stype) {
                return self.windColumnChart
            }
            if ("precipitationChart" == stype) {
                return self.precipitationChart
            }
            if ("monitorChart" == stype) {
                return self.monitorChart
            }
            if ("getNCTDZYanalysisChart" == stype) {
                return self.getNCTDZYanalysisChart
            }
            if ("getNZTRPanalysisChart" == stype) {
                return self.getNZTRPanalysisChart
            }
            if ("getXQCLanalysisChart" == stype) {
                return self.getXQCLanalysisChart
            }
        }

    }])
/**
 * Created by hy on 16-6-22.
 */

angular.module('theme.homeShareData', [])
    .factory('NavigationData', [function () {
        return {

            MainMenu: [
              /*  {
                    label: '资源',
                    img: 'tools/images/menu_zy.png',
                    child: [

                        {
                            label: '地图',
                            img1: 'tools/images/zy_map.png',
                            img2: 'tools/images/zy_mapTxt.png',
                            url: '#/resource/map'
                        },

                        {
                            label: '信息',
                            img1: 'tools/images/zy_info.png',
                            img2: 'tools/images/zy_infoTxt.png',
                            url: '#/resource/info'
                        }
                    ]
                },*/

                /*{
                    label: '计划',
                    img: 'tools/images/menu_jh.png',
                    child: [

                        {
                            label: '需求',
                            img1: 'tools/images/jh_contract2.png',
                            img2: 'tools/images/jh_contractTxt2.png',
                            url: '#/plan/contract'
                        },

                        {
                            label: '排产',
                            img1: 'tools/images/jh_sked2.png',
                            img2: 'tools/images/jh_skedTxt2.png',
                            url: '#/plan/sked'
                        },
                        {
                            label: '外采',
                            img1: 'tools/images/jh_purchase.png',
                            img2: 'tools/images/jh_purchaseTxt.png',
                            url: '#/plan/purchase'
                        },
                        {
                            label: '缺口',
                            img1: 'tools/images/jh_gap.png',
                            img2: 'tools/images/jh_gapTxt.png',
                            url: '#/plan/gap'
                        }
                    ]
                },*/

                {
                    label: '生产',
                    img: 'tools/images/menu_sc.png',
                    child: [

                        {
                            label: '种植',
                            img1: 'tools/images/sc_plant.png',
                            img2: 'tools/images/sc_plantTxt.png',
                            url: '#/production/plant'
                        },

                        {
                            label: '农事',
                            img1: 'tools/images/sc_farm.png',
                            img2: 'tools/images/sc_farmTxt.png',
                            url: '#/production/farm'
                        },
                        /*{
                            label: '养殖',
                            img1: 'tools/images/sc_yangzhi.png',
                            img2: 'tools/images/sc_yangzhiTxt.png',
                            url: '#/production/breed'
                        },*/
                        {
                            label: '监控',
                            img1: 'tools/images/sc_jianko.png',
                            img2: 'tools/images/sc_jiankoTxt.png',
                            url: '#/production/monitor'
                        },
                        {
                            label: '气象',
                            img1: 'tools/images/sc_weather.png',
                            img2: 'tools/images/sc_weatherTxt.png',
                            url: '#/production/weather'
                        },
                        /*{
                            label: '农资',
                            img1: 'tools/images/sc_nongzi.png',
                            img2: 'tools/images/sc_nongziTxt.png',
                            url: '#/production/nongzi'
                        },*/
                    ]
                },

                {
                    label: '销售',
                    img: 'tools/images/menu_xs.png',
                    child: [

                        {
                            label: '订单',
                            img1: 'tools/images/xs_order.png',
                            img2: 'tools/images/xs_orderTxt.png',
                            url: '#/sale/order'
                        },

                        /*{
                            label: '预售',
                            img1: 'tools/images/xs_yushou.png',
                            img2: 'tools/images/xs_yushouTxt.png',
                            url: '#/sale/yushou'
                        },
                        {
                            label: '价格',
                            img1: 'tools/images/xs_cost.png',
                            img2: 'tools/images/xs_costTxt.png',
                            url: '#/sale/cost'
                        },
                        {
                            label: '供求',
                            img1: 'tools/images/xs_gongying.png',
                            img2: 'tools/images/xs_gongyingTxt.png',
                            url: '#/sale/supply'
                        },*/
                        {
                            label: '农场秀',
                            img1: 'tools/images/xs_ncx.png',
                            img2: 'tools/images/xs_ncxTxt.png',
                            url: '#/sale/ncx'
                        }
                    ]
                },

                {
                    label: '加工',
                    img: 'tools/images/menu_jg.png',
                    child: [

                        {
                            label: '采收',
                            img1: 'tools/images/jg_cs.png',
                            img2: 'tools/images/jg_csTxt.png',
                            url: '#/machining/cs'
                        },

                        {
                            label: '库存',
                            img1: 'tools/images/jg_kucun.png',
                            img2: 'tools/images/jg_kucunTxt.png',
                            url: '#/machining/stock'
                        },
                        /*{
                            label: '品控',
                            img1: 'tools/images/jg_jiance.png',
                            img2: 'tools/images/jg_jianceTxt.png',
                            url: '#/machining/quality'
                        }*/
                    ]
                },

                {
                    label: '履历',
                    img: 'tools/images/menu_lvli.png',
                    url: '#/resume/resume'
                },

                {
                    label: '分析',
                    img: 'tools/images/menu_fx.png',
                    url: '#/analysis/analysis'
                },
                {
                    label: '服务中心',
                    img: 'tools/images/menu_fwzx.png',
                    url: '#/serviceCentre/serviceCentre'
                }

            ]
        }

    }])

    .factory('plantTask', function () {
        return {
            plantTaskData: [
                {
                    img: 'tools/images/1460642819750b8052.png',
                    label: '审核种植计划',
                    total: '共计5条任务',
                    conent: '审核计划种植的内容，是否和实际种植情况相同，如有出入，按实际情况进行修改。完成一个审核任务，赠送1积分。',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/production/plant'
                },
                {
                    img: 'tools/images/14606428198192a82b.png',
                    label: '添加农事记录',
                    total: '共计5条任务',
                    conent: '按农事完成情况，添加农事记录，只有农事图片或投入品用量的，每条赠送1个积分，农事图片和投入品都添加的，' +
                    '每条赠送2个积分，每日5条封顶。使用农事宝添加农事记录会多获得1分。',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/production/farm'
                },
                {
                    img: 'tools/images/14606428198722d8ec.png',
                    label: '记录采收情况',
                    total: '共计10条任务',
                    conent: '按采收情况添加采收记录，每条记录，赠送1积分，每日10条封顶。',
                    schedule: '0/10',
                    integral: '+0',
                    src: '#/machining/cs'
                },
                {
                    img: 'tools/images/1460642819923a2c81.png',
                    label: '记录菜品出入库量',
                    total: '共计5条任务',
                    conent: '记录菜品采收入库情况和销售出库情况，每条出库或入库记录，赠送2积分，每日5条封顶。',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/machining/stock'
                },
                {
                    img: 'tools/images/14606428199854098d.png',
                    label: '销售下单',
                    total: '共计10条任务',
                    conent: '销售下单，打印订单并指导包装，每条记录，赠送2积分，每日10条封顶。',
                    schedule: '0/10',
                    integral: '+0',
                    src: '#/sale/order'
                },
                {
                    img: 'tools/images/14606428200680bd61.png',
                    label: '客户签单确认',
                    total: '共计10条任务',
                    conent: '配送订单客户签收确认。每条签收，赠送1积分，每日10条签收单封顶。',
                    schedule: '0/10',
                    integral: '+0',
                    src: '#/sale/order'
                },
                {
                    img: 'tools/images/146064282015984710.png',
                    label: '添加供应做预售',
                    total: '共计5条任务',
                    conent: '添加供应信息，可以帮助您预售产品，提早拿到订单，解决后顾之忧。每条供应，赠送1积分，每日5条供应封顶。',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/sale/supply'//解决跳转到我的供求
                },
                {
                    img: 'tools/images/1460642820231648af.png',
                    label: '使用追溯履历',
                    total: '共计10条任务',
                    conent: '配送订单客户签收确认。每条签收，赠送1积分，每日10条签收单封顶。',
                    schedule: '0/10',
                    integral: '+0',
                    src: '#/resume/resume'
                },
                {
                    img: 'tools/images/1460642820283c9284.png',
                    label: '互助问答-提问',
                    total: '共计5条任务',
                    conent: '向农场专家提出问题',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/'//todo 暂时跳转到首页
                },
                {
                    img: 'tools/images/1460642820352cc2eb.png',
                    label: '互助问答-解答',
                    total: '共计5条任务',
                    conent: '在农事宝上面解答相关农事问题，赢得积分',
                    schedule: '0/5',
                    integral: '+0',
                    src: '#/'//todo   暂时跳转到首页
                }

            ]
        }
    })

    .factory('integralData', function () {
        return {
            integralData: [
                {
                    label: '绿色防控体系线下指导',
                    img: 'tools/images/1460642805847b6f8b.png',
                    exchange: '1500',
                    marketValue: '￥200.00',
                    second: '绿色防控体系',
                    child: {
                        productId: '0003',
                        expertName: '王美荣',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '主讲农场整体生产体系源头把控方法及处理措施，从而减少病虫害的发生，降低投入，保证100%食品检测达标',
                        number: '5人',
                    }

                },
                {
                    label: '土壤改良线下指导',
                    img: 'tools/images/1460642805929e1e00.png',
                    exchange: '3000',
                    marketValue: '￥500.00',
                    second: '土壤改良',
                    child: {
                        productId: '0004',
                        expertName: '李老师',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '通过土壤检测指标、土质、历年种植施肥情况，来判断土壤肥力高低，来建议配肥品种和数量。',
                        number: '10人',
                    }

                },
                {
                    label: '排产线下指导',
                    img: 'tools/images/14606428060149bdbc.png',
                    exchange: '3000',
                    marketValue: '￥500.00',
                    second: '排产',
                    child: {
                        productId: '0005',
                        expertName: '周世杰',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '根据农场生产现状、往年种植情况及销售情况，生产管理者按照以产定销或者以销定产来安排棚室定植时间、开始采收时间、结束采收时间、整地、育苗、预计产出等数据化。',
                        number: '5人',
                    }

                },
                {
                    label: '蔬菜主要病害及防治药剂介绍线下指导',
                    img: 'tools/images/14606428060575fe2c.png',
                    exchange: '2000',
                    marketValue: '￥300.00',
                    second: '蔬菜主要病害及防治药剂介绍',
                    child: {
                        productId: '0006',
                        expertName: '韩明杰',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '主讲生产上主要的传染性病害、非传染性病害；蔬菜病害防治的保护剂和治疗剂有哪些等',
                        number: '5人',
                    }

                },
                {
                    label: '技术管理服务线下指导',
                    img: 'tools/images/1460642806178c68e9.png',
                    exchange: '2000',
                    marketValue: '￥300.00',
                    second: '技术管理服务',
                    child: {
                        productId: '0007',
                        expertName: '韩明杰',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '针对农场所需的技术管理进行相应的定制服务培训',
                        number: '5人',
                    }

                },
                {
                    label: '现场员工技能培训线下指导',
                    img: 'tools/images/146064280624581178.png',
                    exchange: '2000',
                    marketValue: '￥300.00',
                    second: '现场员工技能培训',
                    child: {
                        productId: '0008',
                        expertName: '王美荣',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '针对农场员工在生产上薄弱环节所需的操作技能进行培训',
                        number: '5人',
                    }

                },
                {
                    label: '现场观摩交流学习线下指导',
                    img: 'tools/images/14606428063062d0be.png',
                    exchange: '3000',
                    marketValue: '￥300.00',
                    second: '现场观摩交流学习',
                    child: {
                        productId: '0009',
                        expertName: '周世杰',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '组织各农场主及主要管理、技术人员到优秀农场观摩学习，交流经验',
                        number: '10人',
                    }

                },
                {
                    label: '定制性技术培训线下指导',
                    img: 'tools/images/146064280637068c0c.JPG',
                    exchange: '4000',
                    marketValue: '￥800.00',
                    second: '定制性技术培训',
                    child: {
                        productId: ' 0010',
                        expertName: '待定',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '针对农场现状急需解决的问题，邀请相应专家进行定制性技术服务',
                        number: '10人',
                    }

                },
                {
                    label: '农场云和农事宝软件功能介绍线下指导',
                    img: 'tools/images/1460642806626b99c5.png',
                    exchange: '700',
                    marketValue: '￥100.00',
                    second: '农场云和农事宝软件功能介绍',
                    child: {
                        productId: '0011',
                        expertName: '周世杰',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '主讲软件定位及各功能模块使用目的',
                        number: '5人',
                    }

                },
                {
                    label: '常见蔬菜采后处理线上咨询/线下指导',
                    img: 'tools/images/14606428066829e95b.png',
                    exchange: '1500',
                    marketValue: '￥200.00',
                    second: '常见蔬菜采后处理',
                    child: {
                        productId: '0012',
                        expertName: '王美荣',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '针对常见蔬菜采后处理关键环节进行讲解',
                        number: '5人',
                    }

                },
                {
                    label: '微生物在农业上的应用线上咨询/线下指导',
                    img: 'tools/images/1460642806741cf2a3.png',
                    exchange: '1200',
                    marketValue: '￥150.00',
                    second: '微生物在农业上的应用',
                    child: {
                        productId: '0013',
                        expertName: '江厚春',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '讲解土壤微生物活动规律，使用好处，并推荐市场上常用的微生物品种及使用方法',
                        number: '5人',
                    }

                },
                {
                    label: '无土栽培在设施农业中的应用线上咨询/线下指导',
                    img: 'tools/images/1460642806880da569.png',
                    exchange: '1500',
                    marketValue: '￥200.00',
                    second: '无土栽培在设施农业中的应用',
                    child: {
                        productId: '0014',
                        expertName: '周世杰/江厚春',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '主讲无土栽培（营养液水培及基质培）的配方设计原理及原料组成、在设施农业的应用现状',
                        number: '5人',
                    }
                },
                {
                    label: '椰糠栽培技术介绍线上咨询/线下指导',
                    img: 'tools/images/146064280693437329.png',
                    exchange: '2000',
                    marketValue: '￥300.00',
                    second: '椰糠栽培技术介绍',
                    child: {
                        productId: '0015',
                        expertName: '江厚春',
                        serviceLocation: '北京市朝阳区通惠河畔创意产业园惠河南街1002-7/或者依农场提供场所',
                        serviceIntroduction: '主讲椰糠栽培作为科技园区中一种新型栽培方式，展示水肥一体化无土栽培体系、优势',
                        number: '5人',
                    }
                }
            ]

        }
    })

    .factory('integralRuleData',[function(){
        return{
            ruleData: [
                {
                    navLabel: '关注公众号',
                    explain: '仅限企业管理员账户,并且每个企业仅限一次',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '关注义田农场帮手并绑定',
                            number: '+20'

                        }
                    ]
                },
                {
                    navLabel: '审核种植计划',
                    explain: '审核种植计划的内容,是否和实际种植情况相同,如有出入,按实际情况进行修改.完成一个审核计划,赠送1积分,每日5个任务封顶.',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '审核种植信息',
                            number: '+1'

                        }
                    ]
                },
                {
                    navLabel: '添加农事记录',
                    explain: '按农事完成情况，添加农事记录。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '系统农事记录(只有农事图片或投入品 )',
                            number: '+1'

                        },
                        {
                            operation: '操作2',
                            operationText: '系统农事记录(有农事图片并且有投入品)',
                            number: '+2'

                        },
                        {
                            operation: '操作3',
                            operationText: '农事宝有农事图片并且有投入品',
                            number: '+4'

                        },
                        {
                            operation: '操作4',
                            operationText: '农事宝有农事图片或有投入品',
                            number: '+2'

                        }
                    ]
                },
                {
                    navLabel: '记录采收情况',
                    explain: '按采收情况添加采收记录。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '采收记录',
                            number: '+1'

                        },
                        {
                            operation: '操作2',
                            operationText: '农事宝采收记录',
                            number: '+1'

                        }
                    ]
                },
                {
                    navLabel: '记录菜品出入库量',
                    explain: '记录菜品采收入库情况和销售出库情况。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '菜品出入库',
                            number: '+2'

                        }
                    ]
                },
                {
                    navLabel: '销售下单',
                    explain: '销售下单，打印订单并指导包装。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '添加订单',
                            number: '+2'

                        }
                    ]
                },
                {
                    navLabel: '客户签单确认',
                    explain: '配送订单客户签收确认。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '确认订单签收',
                            number: '+1'

                        }
                    ]
                },
                {
                    navLabel: '添加供应做预售',
                    explain: '添加供应信息，可以帮助您预售产品，提早拿到订单，解决后顾之忧。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '添加供应信息',
                            number: '+1'

                        }
                    ]
                },
                {
                    navLabel: '使用追溯履历',
                    explain: '给包装好，准备出售的菜品贴上质量追溯标签。',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '对应一个履历或打印一次履历',
                            number: '+1'

                        }
                    ]
                },
                {
                    navLabel: '互助问答-提问',
                    explain: '向农场专家提出问题',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '互助问答-提问',
                            number: '+2'

                        },
                        {
                            operation: '操作2',
                            operationText: '农事宝提问',
                            number: '+3'

                        }
                    ]
                },
                {
                    navLabel: '互助问答-解答',
                    explain: '在农事宝上面解答相关农事问题，赢得积分',
                    child: [
                        {
                            operation: '操作1',
                            operationText: '互助问答-解答',
                            number: '+4'

                        },
                        {
                            operation: '操作2',
                            operationText: '农事宝解答一条提问',
                            number: '+5'

                        }
                    ]
                }
            ]
        }
    }])

    .factory('farmSelect', [function(){
        return{
            varietiesPartData: [
                    {
                        varieties: '苋菜',
                        part: '叶片'
                    },
                    {
                        varieties: '菠菜',
                        part: '花朵'
                    },
                    {
                        varieties: '青花菜(西兰花)',
                        part: '茎部'
                    },
                    {
                        varieties: '花椰菜',
                        part: '根系'
                    },
                    {
                        varieties: '青菜(普通白菜)',
                        part: '幼苗'
                    },
                    {
                        varieties: '芹菜',
                        part: '果实'
                    },
                    {
                        varieties: '菜瓜',
                        part: '全株'
                    }
                   /* '苦瓜','丝瓜','西葫芦(笋瓜)','南瓜(倭瓜)','','黄瓜','苤蓝（球茎甘蓝）','生菜','茼蒿','芥蓝',
                    '萝卜','大白菜','茴香','苦苣（苦菊）','茄子','番茄（西红柿）','韭菜','草莓','西瓜','香菜（芫荽）','辣椒（甜椒）',
                    '冬瓜','芜菁','甜菜根（根菾菜）','辣根','牛蒡','美洲防风'*/
                ]
        }
    }])


    .factory('timeData', [function(){
        return{
            year: ['2016','2017','2018','2019','2020'],
            month: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
            year_month: ['2016-01','2016-02','2016-03','2016-04','2016-05','2016-06','2016-07','2016-08','2016-09','2016-10',
                '2016-11','2016-12','2017-01','2017-02','2017-03','2017-04','2017-05','2017-06','2017-07','2017-08','2017-09',
                '2017-10','2017-11','2017-12','2018-01','2018-02','2018-03','2018-04','2018-05','2018-06','2018-07','2018-08',
                '2018-09','2018-10','2018-11','2018-12','2019-01','2019-02','2019-03','2019-04','2019-05','2019-06','2019-07',
                '2019-08','2019-09','2019-10','2019-11','2019-12','2020-01','2020-02','2020-03','2020-04','2020-05','2020-06',
                '2020-07','2020-08','2020-09','2020-10','2020-11','2016-12',]
        }
    }])

/**
 * Created by hy on 16-6-23.
 */

'use strict';

angular.module('theme.directives', [])
    .directive('leftNav', [function () {

        return {

            restrict: 'A',
            scope: true,
            link: function (scope, elem, attr) {

                if (scope.item.child != undefined) {

                    $(elem).mouseenter(function () {
                        elem.find("ul").css("display", "block");
                    })

                    $(elem).mouseleave(function () {
                        elem.find("ul").css("display", "none");

                    })
                }
            }
        }
    }])

    .directive('leftSecondNav', [function () {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {
                //$(elem).prepend("aaaaaaaaaaa");

                $(elem).mouseenter(function () {
                    elem.css("background", "url(./tools/images/left_bg_hover2.jpg) repeat-y");
                })

                $(elem).mouseleave(function () {
                    elem.css('background', 'url(./tools/images/leftLevel_bg.png) no-repeat right');

                })
            }
        }
    }])

    .directive('updateNumber', function () {
        return {
            restrict: 'A',
            scope: true,
            link: function (scope, elem, attr) {

                var img1 = elem.find('img').eq(0);
                var img2 = elem.find('img').eq(1);
                var input = elem.find('input');
                img1.on('click', function () {
                    var val = $(input).val();
                    if (val < 99) {
                        val++;
                        $(input).val(val);
                    }

                })

                img2.on('click', function () {
                    var val = $(input).val();
                    if (val > 1) {
                        val--;
                        $(input).val(val)
                    }


                })

            }
        }
    })

    .directive('datePicker', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                $('.datetimepicker1').datetimepicker({
                    format: 'YYYY-MM-DD',
                })
            }
        }

    }])

    .directive('farmDatetime', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                $(elem).click(function () {
                    $('.farm_datetimepicker').show();
                })

                $('.farm_datetimepicker button:eq(1)').click(function () {
                    $('.farm_datetimepicker').hide();
                })
            }
        }
    }])

    .directive('btnSwitch', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                elem.children().on('click', function (e) {
                    e.preventDefault();
                    elem.children().removeClass('active');
                    $(this).addClass('active');
                })

            }
        }
    }])

    .directive('ulAllocation', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                var liCount = elem.children('li').length;
                var liWidth = (100 / liCount) + '%';
                elem.children('li').css('width', liWidth);
            }
        }
    }])

    .directive('advancedSearch', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                var visible = false;
                elem.on('click', function () {
                    visible = !visible;
                    if (visible) {
                        $(elem).parent().parent().find('.stock_advancedSearch').fadeIn(500, function () {
                            elem.css("background", "url(./tools/images/gjbottom.jpg) right no-repeat");
                        });
                    } else {
                        $(elem).parent().parent().find('.stock_advancedSearch').fadeOut(500, function () {
                            elem.css("background", "url(./tools/images/gjtop.jpg) right no-repeat");
                        });
                    }
                })
            }
        }
    }])

    .directive('screen', [function () {
        return {
            restrict: 'A',
            scope: {},
            link: function (scope, elem, attr) {
                var visible = false;
                elem.on('click', function () {
                    visible = !visible;
                    if (visible) {
                        $('.orderContent3').fadeIn(500, function () {
                            elem.css("background", "url(./tools/images/gjbottom.jpg) right no-repeat");
                        });
                    } else {
                        $('.orderContent3').fadeOut(500, function () {
                            elem.css("background", "url(./tools/images/gjtop.jpg) right no-repeat");
                        });
                    }
                })
            }
        }
    }])

    .directive('orderLeftNavActive', [function () {
        return {
            restrict: 'A',
            /*scope: true,*/
            link: function (scope, elem, attr) {
                $(elem.find('li')).eq(0).addClass('oderLeftNavActive');
                $(elem.find('li')).click(function () {
                    $(this).addClass('oderLeftNavActive');
                    $(this).siblings().removeClass('oderLeftNavActive');
                    var orderLeftNav = $(this).find('span').text();
                    scope.$broadcast('orderLeftNavText', orderLeftNav);
                })
            }
        }
    }])

    .directive('orderContentSpanActive', [function () {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {
                $(elem.find('span')).eq(0).addClass('orderContent1SpanActive');
                $(elem.find('span')).click(function () {
                    $(this).addClass('orderContent1SpanActive');
                    $(this).siblings().removeClass('orderContent1SpanActive');
                })
            }
        }
    }])

    .directive('hideFoldBtn', function () {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {
                $(elem).click(function () {
                    if ($(".monitor_left").css('display') == 'block') {
                        $(".monitor_left").hide();
                        $(".foldBtn").css("left", "0");
                        $(".monitor_right").css({"width": "100%", "margin-left": "0"});
                    } else {
                        $(".monitor_left").show();
                        $(".foldBtn").css("left", "12%");
                        $(".monitor_right").css({"width": "88%", "margin-left": "12%"})
                    }
                })
            }
        }
    })

    .directive('switchAnalysisLeft', ["$rootScope", function ($rootScope) {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {
                var ul = $(elem).next("ul");
                $(elem).click(function () {
                    if (ul.css("display") == "block") {
                        ul.hide();
                    } else {
                        ul.show();
                    }
                })

                var li = $(".analysis_left").find("li");

                var h2 = $(".analysis_left h2");
                li.click(function (e) {
                    var text = e.target.innerText;
                    $rootScope.$broadcast("switchNav", text);

                    angular.forEach(li, function (data) {
                        if (data.innerText == text) {
                            var activeH2 = $(data).parent("ul").prev("h2");
                            angular.forEach(h2, function (item) {
                                if (item.innerText != activeH2[0].innerText) {
                                    $(item).next("ul").hide();
                                }
                            })
                            $(data).addClass("analysis_left_li_active");
                        } else {
                            $(data).removeClass("analysis_left_li_active")
                        }
                    })
                })

            }
        }
    }])

    .directive('crktjLiActive', [function () {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {
                var a_label = $(elem).find("span");
                a_label.eq(0).addClass("crkti_li_active");
                a_label.click(function () {
                    $(this).addClass("crkti_li_active");
                    $(this).parent().siblings().find("span").removeClass("crkti_li_active");
                })
            }
        }
    }])

    .directive('cghtLiActive', [function () {
        return {
            restrict: 'A',
            link: function (scope, elem, attr) {

                var a_label = $(elem).find("span");
                if(scope.$first === true){
                    a_label.addClass("cght_li_active");
                }
                a_label.click(function () {
                    $(this).addClass("cght_li_active");
                    $(this).parent().siblings().find("span").removeClass("cght_li_active");
                })
            }
        }
    }])


